(function(t,c){typeof exports=="object"&&typeof module<"u"?c(exports,require("react/jsx-runtime"),require("react")):typeof define=="function"&&define.amd?define(["exports","react/jsx-runtime","react"],c):(t=typeof globalThis<"u"?globalThis:t||self,c(t.DialogflowReact={},t.jsxRuntime,t.react))})(this,function(t,c,a){"use strict";function p(l){let e=l;const s=new Set;return{getSnapshot:()=>e,setState:o=>{e={...e,...o};for(const i of s)i(e)},subscribe:o=>(s.add(o),()=>s.delete(o))}}function S(){let l=0;const e=p({dialogs:[]}),s=(i,d={})=>{const n=String(l++);return new Promise(r=>{const u={id:n,Component:i,resolver:r,props:{...d,close:x=>{o(n,x)}}},{dialogs:g}=e.getSnapshot();e.setState({dialogs:[...g,u]})})},o=(i,d)=>{const{dialogs:n}=e.getSnapshot(),r=n.findIndex(u=>u.id===i);if(r!==-1){n[r].resolver(d);const g=[...n];g.splice(r,1),e.setState({dialogs:g})}};return{open:s,...e}}const f=a.createContext({open:async()=>null}),D=()=>a.useContext(f);function h({children:l,manager:e}){const{dialogs:s}=a.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot),o=a.useMemo(()=>({open:e.open}),[e.open]);return c.jsxs(f.Provider,{value:o,children:[l,s.map((i,d)=>{const{Component:n,props:r}=i;return c.jsx(n,{...r},d)})]})}t.DialogContext=f,t.DialogProvider=h,t.createDialogflow=S,t.createStore=p,t.useDialog=D,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});
